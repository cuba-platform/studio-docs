:sourcesdir: ../../../../source

[[middleware_integration_tests]]
==== Создание интеграционных тестов
--
CUBA приложения можно тестировать, используя широко известные подходы: юнит-тесты, интеграционные тесты и UI тесты. Studio предоставляет разработчику поддержку для следующих категорий тестов:

* {main_man_url}/integration_tests_mw.html[Интеграционные тесты среднего слоя]. Эта категория тестов используется для тестирования функциональности среднего слоя: сервисов, бинов, слушателей событий, логики ORM и взаимодействия с базой данных. Тесты среднего слоя запускаются в полностью функциональном контейнере Spring, подключенном к базе данных.
* {main_man_url}/integration_tests_client.html[Интеграционные тесты веб-слоя]. Эти тесты запускаются в контейнере Spring, относящегося к блоку веб-клиента. Контейнер веб-тестов работает независимо от среднего слоя, а служебный код создает заглушки для всех тестов среднего слоя.

Обе группы тестов отображаются в дереве проекта CUBA, в секции *Business Logic* -> *Tests*, сгруппированные по модулю:

image::features/middleware/tests_in_tree.png[align="center"]

Чтобы создать новый интеграционный тест, выберите секцию *Business Logic* -> *Tests* в дереве проекта и выполните действие контекстного меню: *New* -> *Integration Test (Middleware)* или *Integration Test (Web)*:

image::features/middleware/create_test_menu.png[align="center"]

Если в вашем проекте еще не создано корня исходных файлов для тестов или тестового контейнера, то Studio покажет дополнительный диалог с подтверждением, перед тем как создать необходимые файлы и классы.

В появившемся диалоге вам нужно ввести следующие параметры:

* *Class Name* - название тестового класса.
* *Package* - пакет, куда нужно поместить тестовый класс.
* *Test container class* - класс тестового контейнера. Контейнер по умолчанию `Common` создается автоматически, но вы также можете создать другие классы контейнеров, например чтобы протестировать свое приложение, используя другую СУБД.
* *Testing library* - выберите *JUnit5* или *JUnit4*. Имейте ввиду, что CUBA проекты, созданные на предыдущих версиях платформы вплоть до 7.1, поддерживают только *JUnit4*, даже если они были смигрированы на CUBA 7.2.

image::features/middleware/create_mw_test_dialog.png[align="center"]

--
