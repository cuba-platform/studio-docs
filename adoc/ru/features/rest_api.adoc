:sourcesdir: ../../../source

[[rest_api]]
=== REST API
--
REST API - это аддон CUBA, который добавляет в ваше приложение возможность осуществлять CRUD операции, исполнять предопределенные JPQL запросы, методы сервисов и другие возможности посредством REST веб сервисов. REST API - это также стандартный способ, которым  <<frontend_ui,фронтенд интерфейс>> взаимодействует с сервером. Дополнительная информация об этом аддоне доступна в {restapi_man_url}[официальной документации].

Чтобы начать использовать возможности REST API в вашем проекте, установите аддон из окна Studio <<addons_marketplace,CUBA Add-Ons>>.

Studio предоставляет следующую поддержку для функциональности REST API:

* Автоматическая генерация необходимых свойств приложения.
* Создание и отображение конфигурационных файлов в дереве проекта CUBA.
* Помощь с регистрацией методов сервисов для их выставления наружу через REST API.
--

[[rest_api_client_creds]]
Клиентские учетные данные::
--
Когда Studio добавляет аддон REST API в проект, инструмент генерирует уникальные значения для свойств приложения  {restapi_man_url}/#cuba.rest.client.id[cuba.rest.client.id] и {restapi_man_url}/#cuba.rest.client.secret[cuba.rest.client.secret] и сохраняет их в файл `web-app.properties`. Эти свойства определяют учетные данные, используемые клиентом REST API, чтобы аутентифицировать себя (клиентское приложение, не пользователя CUBA) перед сервером. Заметьте, что оба этих значения рекомендуется изменить при развертывании в production среде.
--

[[rest_api_tree_section]]
Секция дерева проекта::
--
Как только вы добавили аддон REST API в проект, дерево проекта CUBA начнет отображать дополнительную секцию *REST API*:

image::features/rest_api/tree_section.png[align="center"]

В этой секции отображаются следующие конфигурационные файлы:

* `rest-queries.xml` - содержит {restapi_man_url}/#rest_api_v2_queries_config[предопределенные JPQL запросы].
* `rest-services.xml` - содержит {restapi_man_url}/#rest_api_v2_services_config[список методов сервисов], которые доступны для вызова через API.

Если упомянутые файлы еще не существуют, вы можете создать их, открыв контекстное меню в секции *REST API* дерева проекта CUBA и вызвав действия *Create REST Queries Configuration* и *Create REST Services Configuration*:

image::features/rest_api/create_config_files.png[align="center"]

Созданные конфигурационные файлы автоматически регистрируются в файле свойств приложения `web-app.properties`. После этого их можно редактировать.
--

[[rest_api_adding_services]]
Открытие доступа к методам сервисов среднего слоя::
--
Чтобы методы <<middleware_services,сервисов среднего слоя>> можно было вызывать через REST API, вам нужно зарегистрировать их в файле `rest-services.xml`.

Чтобы быстро зарегистрировать необходимый метод сервиса в конфигурации, используйте intention-действие, которое предоставляет Studio:

* Откройте интерфейс сервиса и поместите курсор к требуемому методу.
* Нажмите Alt+Enter (Option+Enter), чтобы увидеть список доступных intention-действий.
* Выберите действие *Register rest method* во всплывающем меню.
* Сигнатура выбранного метода будет добавлена в файл `rest-services.xml`, и вы сможете перейти от интерфейса сервиса к XML-файлу, кликнув по появившемуся маркеру на "жёлобе":

image::features/rest_api/register_rest_method.gif[align="center"]

--
