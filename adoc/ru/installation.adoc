:sourcesdir: ../../source

[[installation]]
== Установка

Перед установкой CUBA Studio убедитесь, что на вашей рабочей машине установлено и настроено необходимое программное обеспечение, описанное в разделе {main_man_url}/setup.html[Установка и настройка] основного Руководства по разработке.

CUBA Studio можно установить в двух различных формах: как отдельную IDE для вашей операционной системы, или как плагин для имеющейся IntelliJ IDEA. Отдельная IDE представляет собой специальную сборку IntelliJ IDEA Community Edition, включающую в себя плагин CUBA. Если вы ранее не использовали IntelliJ IDEA, мы рекомендуем установить Studio как отдельную IDE.

IDE имеет версию, соответствующую используемой версии IntelliJ IDEA, например {idea-version}. Плагин CUBA имеет свою собственную версию, начинающуюся с {plugin-version}.

Установочные файлы IDE для Windows, macOS и Linux доступны по адресу {cuba-download-site}. Плагин доступен в репозитории плагинов IntelliJ (см. <<install_plugin,ниже>>).

[[install_windows]]
Установка на Windows::
+
--
. Скачайте программу установки `cuba-studio-VERSION.exe`.

. Запустите программу установки и следуйте инструкциям в появившемся окне: выберите путь к каталогу установки, тип загрузчика, имя каталога, после чего дождитесь завершения установки.

. Запустите установленное приложение и см. <<first_launch,ниже>> для дальнейших инструкций.
--

[[install_macos]]
Установка на macOS::
+
--
. Скачайте программу установки `cuba-studio-VERSION.dmg`.

. Дважды щёлкните на программы установки, затем перетащите файл `CUBA Studio.app` в каталог `Applications`. Если на вашем компьютере установлена более старая версия Studio, которую вы хотели бы сохранить, выберите _Keep Both_ в появившемся диалоговом окне.

. Запустите приложение CUBA Studio и см. <<first_launch,ниже>> для дальнейших инструкций.
--

[[install_linux]]
Установка на Linux::
+
--
. Установите необходимые зависимости:
+
----
$ sudo apt-get install libgconf-2-4
----

. Скачайте архив `cuba-studio-VERSION.tar.gz`.

. Перенесите архив в подходящий каталог, например, `~/lib`, и распакуйте его:
+
----
$ tar -xvf cuba-studio-VERSION.tar.gz
----

. Перейдите в подкаталог `bin` и запустите приложение:
+
----
$ cd ~/lib/cuba-studio-VERSION/bin
$ ./cuba-studio.sh
----
--

[[first_launch]]
Первый запуск IDE::
+
--
При первом запуске CUBA Studio IDE вам необходимо ответить на несколько вопросов:

* В первом диалоге *Complete Installation*, выберите *Do not import settings* и нажмите *OK*.

* В следующем диалоге *Customize CUBA Studio*, щелкните *Skip Remaining and Set Defaults* чтобы применить параметры по умолчанию. Вы сможете изменить их в любое время позже.

* Далее см. раздел <<getting_started>> для информации о том как создать новый или открыть существующий проект.
--

[[install_plugin]]
Установка плагина для IntelliJ IDEA::
+
--
. Запустите IntelliJ IDEA {minimal-idea-version} или более новую версию.

. Откройте диалог *Plugins*.

. Переключитесь на вкладку *Marketplace*.

. Введите "CUBA" в поле поиска. Вы увидите плагин CUBA в результатах поиска.

. Нажмите *Install* и следуйте инструкциям IDE.
--

[[install_proxy_setup]]
=== Работа за прокси-сервером
--
Чтобы сконфигурировать CUBA Studio для доступа к интернету через прокси-сервер, вам нужно проделать следующие шаги:

. Настроить IntelliJ IDEA (или CUBA Studio)
. Настроить Gradle
. Настроить Git (необязательно)
--

Настройка прокси в IntelliJ IDEA (CUBA Studio)::
+
--
* Открыть диалог *Settings*: главное меню -> *File* -> *Settings*.
* Выбрать секцию настроек *Appearance & Behavior* -> *System Settings* -> *HTTP Proxy*.
* Проставить необходимые значения настроек и нажать *Check connection* для проверки:

image::proxy-idea.png[align="center"]

При необходимости обратитесь к https://www.jetbrains.com/help/idea/settings-http-proxy.html[этой странице] за дополнительной информацией.

--
Настройка прокси в Gradle::
+
--
* Найдите файл *~/.gradle/gradle.properties* в домашнем каталоге пользователя.
* Отредактируйте этот файл и добавьте необходимые параметры, как описано в https://docs.gradle.org/current/userguide/build_environment.html#sec:accessing_the_web_via_a_proxy[документации Gradle]:

[source, java]
----
include::{sourcesdir}/gradle-proxy.properties[]
----
--

Настройка прокси в Git (необязательно)::
+
--
Возможно вы захотите задать настройки прокси в том числе и для инструмента контроля версий Git, например чтобы скачивать проекты-примеры из https://github.com/cuba-platform?utf8=✓&q=sample&type=&language=[GitHub репозиториев] CUBA:

Выполните эту команду:
[source]
----
include::{sourcesdir}/git-proxy.txt[]
----

Или обратитесь к https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpproxy[документации Git] для детального описания.
--

[[gradle_offline_mode]]
=== Работа без интернет подключения
--
Разработка проектов в Studio возможно и без интернет подключения (в оффлайне). При этом все проектные зависимости должны быть уже загружены, т.е. проект уже был открыт и собирался в данной установке Studio. Часть функционала Studio будет недоступна в оффлайн-режиме, например будет невозможно сменить версию CUBA или просматривать список аддонов в CUBA Add-ons Marketplace.

Чтобы включить оффлайн режим, откройте панель инструментов *Gradle*, расположенную в правой части окна IDE и нажмите кнопку *Toggle Offline Mode*:

image::gradle-offline-mode.png[align="center"]

В оффлайн режиме Gradle использует зависимости из кэша, когда выполняет все задачи сборки проекта. Gradle не будет пытаться обращаться к сети для разрешения зависимостей. Если обязательные зависимости отсутствуют в кэше, сборка завершится ошибкой.
--

[[install_plugin_nonstandard]]
=== Нестандартные сборки Studio
--
Иногда вам может потребоваться использовать одну из нестандартных сборок Studio в вашей IDE. Это может быть необходимо для того, чтобы получить ранний доступ к самым новым возможностям Studio или чтобы поучаствовать в бета-тестировании. Чтобы использовать нестандартную сборку Studio, вам нужно установить плагин определенной версии в среду разработки IntelliJ IDEA.

[TIP]
====
Нестандартные сборки Studio имеют такие же требования к наличию подписки, как и стабильные релизы.
====

--

[[install_plugin_beta]]
Бета-версии::
+
--
Бета-версии Studio выпускаются за несколько недель до выхода следующего большого обновления Studio. Эти релизы проходят тестирование, но все-таки могут содержать некоторые неисправленные проблемы. Бета-релизы предназначены для следующих целей:

* Предоставить заинтересованным пользователям ранний доступ к новым возможностям Studio.
* Помочь команде CUBA опробовать новые версии Studio на широком диапазоне рабочих сред, установив бета-версию и предоставив команде обратный отзыв.

Чтобы попробовать возможности бета-версии, проделайте следующее:

. Откройте: главное меню -> *File* -> *Settings* -> *Plugins*.
. Нажмите иконку image:gear_button.png[gear] и выберите *Manage Plugin Repositories*.
. Нажмите *+* (*Add*), чтобы добавить строку и введите следующий Repository URL:
https://plugins.jetbrains.com/plugins/beta/list
. Переключитесь на вкладку *Marketplace*. Вы должны сразу увидеть, что плагин CUBA предлагается к обновлению на версию `BETA`.
. Нажмите *Update*.
. Перезагрузите IDE, если вам будет предложено это сделать.


Если/когда вам потребуется вернуться на стабильную версию плагина, проделайте следующее:

. Откройте: главное меню -> *File* -> *Settings* -> *Plugins*.
. Выполните *Uninstall* для плагина CUBA.
. Нажмите иконку image:gear_button.png[gear] и выберите *Manage Plugin Repositories*.
. Удалите "beta" репозиторий из списка.
. Установите плагин CUBA снова, он скачается из стабильного канала обновлений.

--

[[install_plugin_nightly]]
Ночные (nightly) сборки::
+
--
Ночные сборки Studio публикуются каждую ночь в рамках процесса непрерывной интеграции. Эти сборки содержат последние изменения, выполненные командой CUBA Studio. Вы можете переключиться на ночные сборки, если хотите быть в числе первых людей, получающих самые новые возможности, улучшения и поддержку ещё не вышедших версий платформы CUBA.

[WARNING]
====
Ночные сборки содержат изменения, которые еще не прошли проверку качества. Поэтому они могут содержать серьезные дефекты в функциональности.
====

Чтобы попробовать использовать ночную сборку, проделайте следующее:

. Откройте: главное меню -> *File* -> *Settings* -> *Plugins*.
. Нажмите иконку image:gear_button.png[gear] и выберите *Manage Plugin Repositories*.
. Нажмите *+* (*Add*), чтобы добавить строку и введите следующий Repository URL:
https://plugins.jetbrains.com/plugins/haulmont_nightly/list
. Переключитесь на вкладку *Marketplace*. Вы должны сразу увидеть, что плагин CUBA предлагается к обновлению на версию `NIGHTLY`.
. Нажмите *Update*.
. Перезагрузите IDE, если вам будет предложено это сделать.

Так как новые ночные сборки публикуются ежедневно, вы начнете получать ежедневные уведомления "plugin can be updated" от IDE.

Если/когда вам потребуется вернуться на стабильную версию плагина, проделайте следующее:

. Откройте: главное меню -> *File* -> *Settings* -> *Plugins*.
. Выполните *Uninstall* для плагина CUBA.
. Нажмите иконку image:gear_button.png[gear] и выберите *Manage Plugin Repositories*.
. Удалите "nightly" репозиторий из списка.
. Установите плагин CUBA снова, он скачается из стабильного канала обновлений.
--

[[install_plugin_from_disk]]
Установка плагина с диска::
+
--
Любой из релизов плагина Studio, включая предыдущие версии, также может быть вручную скачан с сайта репозитория плагинов и установлен в IntelliJ IDEA. Проделайте следующие шаги:

. Откройте страницу {plugin-repository-site}[CUBA Plugin] в репозитории плагинов JetBrains.
. Выберите канал, из которого вам нужно скачать релиз (Stable, Beta или Nightly).
. Найдите требуемую версию в списке *Version History*.
. Нажмите *Download*, чтобы скачать сборку.
. Откройте главное меню -> *File* -> *Settings* -> *Plugins*.
. Нажмите иконку image:gear_button.png[gear] и выберите *Install Plugin from Disk...*.
. Выберите загрузившийся zip файл в дереве файлов и нажмите *OK*.
. Перезагрузите IDE, если вам будет предложено это сделать.
--
