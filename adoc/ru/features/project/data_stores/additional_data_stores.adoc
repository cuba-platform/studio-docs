:sourcesdir: ../../../../../../source

[[data_stores_additional]]
===== Дополнительные хранилища данных
--
Вы можете добавить {main_man_url}/data_store.html[дополнительные хранилища данных] в проект, чтобы сохранять данные в отдельную базу данных, или чтобы CUBA приложение могло считывать данные, производимые другой системой.

Чтобы создать дополнительное хранилище данных в проекте,
кликните правой кнопкой мыши по элементу *Data Stores* в дереве проекта CUBA и выберите пункт контекстного меню *New* -> *Additional Data Store*. Дополнительные хранилища данных, зарегистрированные в проекте, отображаются как подпункты секции *Data Stores*:

image::features/project/additional-stores.png[align="center"]

При создании и редактировании дополнительного хранилища открывается диалоговое окно *Data Store*. Оно содержит следующие поля:

* *Data store name* - имя хранилища данных. Может содержать только буквенно-числовые символы и нижние подчеркивания, а также должно отличаться от имени проекта.
* *Data store type* - тип хранилища: `RdbmsStore` или `Custom`, более подробно см. в основном {main_man_url}/data_store.html[Руководстве].
* *DataSource JNDI name* - устанавливается автоматически в Studio на основе имени хранилища.
* В случае, если выбран тип `RdbmsStore`, вам нужно указать дополнительные свойства, описанные в секции выше.
* *DB schema management* - выберите режим, определяющий, как Studio должна управлять схемой БД и отслеживать изменения модели данных для сущностей, хранящихся в данном хранилище.

--
[[data_store_schema_mode]]
Режимы управления схемой БД::
--
В отличие от главного хранилища данных, существуют различные сценарии того, как CUBA приложение и Studio должны работать с дополнительным хранилищем данных.

. *Сторонняя база данных*. В этом варианте использования CUBA приложение подключается к существующей базе данных, наполняемой другой автоматизированной системой, для осуществления системной интеграции на уровне хранимых данных. В этом случае схемы данных и форматы данных полностью определяются другой системой, а CUBA приложение не должно пытаться изменить или удалить существующие таблицы. Сущности не проектируются с нуля, а в основном импортируются в проект с помощью функции Studio <<generate_model,Генерация модели данных>>.
. *Совместная база данных*. В этом варианте использования CUBA приложение так же подключается к уже существующей базе данных для целей системной интеграции. Однако в этом случае база данных планируется быть совместно используемой между несколькими приложениями, и CUBA приложению разрешено создавать свои собственные таблицы либо изменять существующие таблицы. Границы между приложениями могут быть установлены через ограничения ролей. Сущности создаются с помощью дизайнера сущностей, а также импортированы с помощью функции Studio <<generate_model,Генерация модели данных>>. Studio может изменять схему базы данных, но не может создать базу данных с чистого листа.
. *Собственная база данных*. В этом варианте использования планируется, что база данных будет полностью управляться CUBA приложением. Studio может пересоздавать базу данных с чистого листа, т.к. модель данных в проекте содержит всю необходимую информацию о том, как проинициализировать схему БД. Сущности создаются с помощью дизайнера сущностей.

Основываясь на этом, решите, какой из режимов управления схемой БД подходит для ваших целей:

. *Disabled* - Studio не отслеживает изменения схемы БД для данного хранилища данных. Это - режим по умолчанию, и это то, как действовали предыдущие версии Studio. Используйте этот режим для подключения к *сторонним* базам данных.
. *Update Only* - Studio генерирует *update* скрипты миграции и дает возможность обновлять схему БД до соответствия модели данных. Однако, Studio не дает возможность пересоздать базу данных с чистого листа. Используйте этот режим для *совместных* баз данных.
. *Create and Update* - Studio генерирует полный набор *init* и *update* скриптов миграции и предоставляет возможность (Gradle задачи и действия в UI), чтобы пересоздать базу данных с чистого листа или обновить ее до соответствия модели данных. Используйте этот режим для *собственных* баз данных.
--
